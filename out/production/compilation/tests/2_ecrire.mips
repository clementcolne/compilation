.data
BackSlachN: .asciiz "\n"
Vrai: .asciiz "vrai"
Faux: .asciiz "faux"
ErreurDivisionZero: .asciiz "Erreur : Division par zéro"
ErreurRetour: .asciiz "Erreur : Pas de retour dans la fonction"
.text

main:

	#allocation mémoire pour les variables
	move $s7, $sp
	add $sp, $sp, -4

	# a = 3
	li $v0, 3
	sw $v0, 0($s7)

	#ecrire fct()
.data
BackSlachN: .asciiz "\n"
Vrai: .asciiz "vrai"
Faux: .asciiz "faux"
ErreurDivisionZero: .asciiz "Erreur : Division par zéro"
ErreurRetour: .asciiz "Erreur : Pas de retour dans la fonction"
.text

main:

	#allocation mémoire pour les variables
	move $s7, $sp
	add $sp, $sp, -4

	lw $v0, 0($s7)

end:
	#Sortie de programme
	li $v0, 10
	syscall
erreurDivisionZero:
	li $v0, 4 
	la $a0, ErreurDivisionZero
	syscall
	#Sortie de programme
	li $v0, 10
	syscall

erreurRetour:
	li $v0, 4 
	la $a0, ErreurRetour
	syscall
	#Sortie de programme
	li $v0, 10
	syscall

fonction1:
	lw $s2, ($sp)
	# Sauvegarde de l'adresse de retour
	sw $ra, ($sp)
	add, $sp, $sp, -4

	sw $s7, ($sp)
	add, $sp, $sp, -4

	# a = 17
	li $v0, 17
	sw $v0, -4($s7)

	#ecrire a
	lw $v0, -4($s7)
	move $a0, $v0
	li $v0, 1
	syscall

	#retour à la ligne
	li $v0, 4 
	la $a0, BackSlachN
	syscall

	# a = 0
	li $v0, 0
	sw $v0, -4($s7)

	# retourne 0
	li $v0, 0
	add, $sp, $sp, 4
	lw $ra, ($sp)
	jr $ra

	j erreurRetour

	jal fonction1

	move $a0, $v0
	li $v0, 1
	syscall

	#retour à la ligne
	li $v0, 4 
	la $a0, BackSlachN
	syscall

	#ecrire a
	lw $v0, 0($s7)
	move $a0, $v0
	li $v0, 1
	syscall

	#retour à la ligne
	li $v0, 4 
	la $a0, BackSlachN
	syscall


end:
	#Sortie de programme
	li $v0, 10
	syscall
erreurDivisionZero:
	li $v0, 4 
	la $a0, ErreurDivisionZero
	syscall
	#Sortie de programme
	li $v0, 10
	syscall

erreurRetour:
	li $v0, 4 
	la $a0, ErreurRetour
	syscall
	#Sortie de programme
	li $v0, 10
	syscall

fonction1:
	lw $s2, ($sp)
	# Sauvegarde de l'adresse de retour
	sw $ra, ($sp)
	add, $sp, $sp, -4

	sw $s7, ($sp)
	add, $sp, $sp, -4

	# a = 17
	li $v0, 17
	sw $v0, -20($s7)

	#ecrire a
	lw $v0, -20($s7)
	move $a0, $v0
	li $v0, 1
	syscall

	#retour à la ligne
	li $v0, 4 
	la $a0, BackSlachN
	syscall

	# a = 0
	li $v0, 0
	sw $v0, -20($s7)

	# retourne 0
	li $v0, 0
	add, $sp, $sp, 4
	lw $ra, ($sp)
	jr $ra

	j erreurRetour


